{% extends 'base.html' %}

{% block title %}로또 당첨번호 이력 | 회차별 당첨번호 모아보기{% endblock %}
{% block description %}회차별 로또 당첨번호를 한눈에 확인하세요. 최근 당첨번호 이력과 보너스번호까지 정리되어 있습니다.{% endblock %}
{% block keywords %}로또 당첨번호 이력, 로또 회차, 로또 과거 당첨번호{% endblock %}

{% block canonical_url %}https://hmyun.pythonanywhere.com/lottery/history/{% endblock %}

{% block extra_meta %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "로또 당첨번호 이력",
  "description": "회차별 로또 당첨번호를 한눈에 확인",
  "url": "https://hmyun.pythonanywhere.com/lottery/history/"
}
</script>
{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header"><i class="fas fa-history"></i> 로또 당첨번호 이력</div>
  <div class="card-body">
    <p class="text-muted">최근 회차 당첨번호를 모아봤어요.</p>
    <div id="historyTable" class="table-responsive"></div>
  </div>
 </div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  try {
    const data = {{ draws|safe }} || [];
    const rows = data.slice(0, 100).map(draw => {
      const nums = (draw.number || []).map(n => `<span class="badge bg-secondary me-1">${n}</span>`).join('');
      return `<tr><td>${draw.round}회</td><td>${draw.date || ''}</td><td>${nums}<span class="badge bg-danger ms-2">+ ${draw.bonus || ''}</span></td></tr>`;
    }).join('');
    document.getElementById('historyTable').innerHTML = `
      <table class="table table-hover">
        <thead><tr><th>회차</th><th>추첨일</th><th>번호</th></tr></thead>
        <tbody>${rows}</tbody>
      </table>`;
  } catch (e) {
    document.getElementById('historyTable').innerHTML = '<div class="alert alert-danger">데이터를 불러오지 못했습니다.</div>';
  }
});
</script>
{% endblock %}


