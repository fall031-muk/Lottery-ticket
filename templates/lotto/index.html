{% extends 'base.html' %}

{% block title %}로또 번호 추첨기 - 무료 로또 번호 생성 및 당첨번호 확인{% endblock %}

{% block meta %}
<meta name="description" content="무료 로또 번호 추첨기로 1등 당첨을 위한 번호를 생성하세요. 최근 당첨번호 확인, 번호 조합 분석, 당첨 확률 계산 등 다양한 기능을 제공합니다.">
<meta name="keywords" content="로또 번호 추첨기, 로또 번호 생성, 당첨번호 확인, 로또 번호 조합, 로또 당첨 확률, 무료 로또 번호">
<meta property="og:title" content="로또 번호 추첨기 - 무료 로또 번호 생성 및 당첨번호 확인">
<meta property="og:description" content="무료 로또 번호 추첨기로 1등 당첨을 위한 번호를 생성하세요. 최근 당첨번호 확인, 번호 조합 분석, 당첨 확률 계산 등 다양한 기능을 제공합니다.">
<meta property="og:type" content="website">
{% endblock %}

{% block content %}
<main class="container">
    <article class="row">
        <div class="col-lg-8 mx-auto">
            <header class="mb-4">
                <h1 class="text-center">로또 번호 추첨기</h1>
                <p class="lead text-center">무료로 사용할 수 있는 로또 번호 추첨기로 1등 당첨을 위한 번호를 생성하세요.</p>
            </header>

            <!-- 번호 추첨 카드 -->
            <section class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-random"></i> 로또 번호 추첨
                </div>
                <div class="card-body">
                    <p class="card-text">버튼을 클릭하면 1부터 45까지의 숫자 중 무작위로 6개의 번호가 선택됩니다.</p>
                    <div class="mb-3">
                        <label for="excludeNumbers" class="form-label">제외할 번호 (쉼표로 구분)</label>
                        <input type="text" class="form-control" id="excludeNumbers" placeholder="예: 1, 2, 3">
                        <div class="form-text">제외하고 싶은 번호를 쉼표로 구분하여 입력하세요 (1-45 사이의 숫자)</div>
                    </div>
                    <button id="generateBtn" class="btn btn-primary btn-lg w-100">
                        <i class="fas fa-sync-alt"></i> 번호 추첨하기
                    </button>
                    
                    <div class="loading">
                        <div class="spin"><i class="fas fa-spinner fa-2x"></i></div>
                        <p>추첨 중...</p>
                    </div>
                    
                    <div id="lottoResult" class="text-center mt-4" style="min-height: 80px;">
                        <!-- 추첨된 번호가 여기에 표시됩니다 -->
                    </div>
                </div>
            </section>
            
            <!-- 최근 당첨 번호 -->
            <section class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-history"></i> 최근 당첨 번호
                </div>
                <div class="card-body">
                    <div id="recentDraws">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>회차</th>
                                        <th>당첨일</th>
                                        <th>당첨번호</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 최근 5회차 당첨번호 하드코딩 -->
                                    <tr>
                                        <td>1173회</td>
                                        <td>2025-05-24</td>
                                        <td>
                                            <div class="d-flex flex-wrap justify-content-center">
                                                <div class="lotto-ball history-ball ball-1-10">1</div>
                                                <div class="lotto-ball history-ball ball-1-10">5</div>
                                                <div class="lotto-ball history-ball ball-11-20">18</div>
                                                <div class="lotto-ball history-ball ball-11-20">20</div>
                                                <div class="lotto-ball history-ball ball-21-30">30</div>
                                                <div class="lotto-ball history-ball ball-31-40">35</div>
                                                <span class="mx-2">+</span>
                                                <div class="lotto-ball history-ball ball-1-10">3</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>1172회</td>
                                        <td>2025-05-17</td>
                                        <td>
                                            <div class="d-flex flex-wrap justify-content-center">
                                                <div class="lotto-ball history-ball ball-1-10">7</div>
                                                <div class="lotto-ball history-ball ball-1-10">9</div>
                                                <div class="lotto-ball history-ball ball-21-30">24</div>
                                                <div class="lotto-ball history-ball ball-41-45">40</div>
                                                <div class="lotto-ball history-ball ball-41-45">42</div>
                                                <div class="lotto-ball history-ball ball-41-45">44</div>
                                                <span class="mx-2">+</span>
                                                <div class="lotto-ball history-ball ball-41-45">45</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>1171회</td>
                                        <td>2025-05-10</td>
                                        <td>
                                            <div class="d-flex flex-wrap justify-content-center">
                                                <div class="lotto-ball history-ball ball-1-10">3</div>
                                                <div class="lotto-ball history-ball ball-1-10">6</div>
                                                <div class="lotto-ball history-ball ball-1-10">7</div>
                                                <div class="lotto-ball history-ball ball-11-20">11</div>
                                                <div class="lotto-ball history-ball ball-11-20">12</div>
                                                <div class="lotto-ball history-ball ball-11-20">17</div>
                                                <span class="mx-2">+</span>
                                                <div class="lotto-ball history-ball ball-11-20">19</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>1170회</td>
                                        <td>2025-05-03</td>
                                        <td>
                                            <div class="d-flex flex-wrap justify-content-center">
                                                <div class="lotto-ball history-ball ball-1-10">3</div>
                                                <div class="lotto-ball history-ball ball-11-20">13</div>
                                                <div class="lotto-ball history-ball ball-21-30">28</div>
                                                <div class="lotto-ball history-ball ball-31-40">34</div>
                                                <div class="lotto-ball history-ball ball-31-40">38</div>
                                                <div class="lotto-ball history-ball ball-41-45">42</div>
                                                <span class="mx-2">+</span>
                                                <div class="lotto-ball history-ball ball-21-30">25</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>1169회</td>
                                        <td>2025-04-26</td>
                                        <td>
                                            <div class="d-flex flex-wrap justify-content-center">
                                                <div class="lotto-ball history-ball ball-1-10">5</div>
                                                <div class="lotto-ball history-ball ball-11-20">12</div>
                                                <div class="lotto-ball history-ball ball-21-30">24</div>
                                                <div class="lotto-ball history-ball ball-21-30">26</div>
                                                <div class="lotto-ball history-ball ball-31-40">39</div>
                                                <div class="lotto-ball history-ball ball-41-45">42</div>
                                                <span class="mx-2">+</span>
                                                <div class="lotto-ball history-ball ball-11-20">20</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- 여기에 더 많은 회차를 추가할 수 있습니다 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 로또 정보 섹션 -->
            <section class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-info-circle"></i> 로또 정보
                </div>
                <div class="card-body">
                    <h2>로또 당첨 확률</h2>
                    <p>로또 1등 당첨 확률은 약 8,145,060분의 1입니다. 이는 45개의 숫자 중 6개를 선택하는 조합의 수입니다.</p>
                    
                    <h2>로또 당첨금</h2>
                    <p>로또 1등 당첨금은 판매금액과 당첨자 수에 따라 달라집니다. 일반적으로 수십억 원에 달할 수 있습니다.</p>
                    
                    <h2>로또 구매 방법</h2>
                    <p>로또는 전국 로또 판매점에서 구매할 수 있습니다. 온라인 구매도 가능합니다.</p>
                </div>
            </section>

            <!-- FAQ 섹션 -->
            <section class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-question-circle"></i> 자주 묻는 질문
                </div>
                <div class="card-body">
                    <h2>로또 번호는 어떻게 생성되나요?</h2>
                    <p>로또 번호는 1부터 45까지의 숫자 중 무작위로 6개를 선택합니다. 보너스 번호는 나머지 숫자 중 하나를 선택합니다.</p>
                    
                    <h2>로또 당첨 확인은 어떻게 하나요?</h2>
                    <p>로또 당첨 확인은 로또 판매점이나 온라인에서 가능합니다. 당첨번호와 일치하는 번호를 확인하세요.</p>
                    
                    <h2>로또 당첨금은 어떻게 받나요?</h2>
                    <p>로또 당첨금은 로또 판매점에서 당첨 확인 후 수령할 수 있습니다. 1등 당첨의 경우 본사에서 직접 수령해야 합니다.</p>
                </div>
            </section>
        </div>
    </article>
</main>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function() {
        // 번호 생성 버튼 클릭 이벤트
        $("#generateBtn").click(function() {
            generateLottoNumbers();
        });
        
        // 로또 번호 생성 함수
        function generateLottoNumbers() {
            $("#lottoResult").empty();
            $(".loading").show();
            
            // 사용자가 입력한 제외할 번호 처리
            const excludeNumbersInput = $("#excludeNumbers").val().trim();
            let excludeNumbers = [];
            if (excludeNumbersInput) {
                excludeNumbers = excludeNumbersInput.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num) && num >= 1 && num <= 45);
            }
            
            // 서버 API 호출
            fetch(`/lottery/numbers?exclude_numbers=${excludeNumbers.join(',')}`)
                .then(response => response.json())
                .then(numbers => {
                    // 결과 표시
                    numbers.forEach((number, index) => {
                        // 번호 등장에 약간의 애니메이션 효과를 주기 위한 지연
                        setTimeout(() => {
                            $("#lottoResult").append(getBallHTML(number));
                        }, index * 300);
                    });
                    
                    $(".loading").hide();
                })
                .catch(error => {
                    $("#lottoResult").html('<div class="alert alert-danger">번호 생성 중 오류가 발생했습니다.</div>');
                    $(".loading").hide();
                    console.error("API 호출 오류:", error);
                });
        }
        
        // 로또 볼 HTML 생성 함수
        function getBallHTML(number, extraClass = '') {
            let ballClass = 'lotto-ball ';
            
            // 번호 범위에 따른 색상 클래스 추가
            if (number >= 1 && number <= 10) {
                ballClass += 'ball-1-10';
            } else if (number >= 11 && number <= 20) {
                ballClass += 'ball-11-20';
            } else if (number >= 21 && number <= 30) {
                ballClass += 'ball-21-30';
            } else if (number >= 31 && number <= 40) {
                ballClass += 'ball-31-40';
            } else {
                ballClass += 'ball-41-45';
            }
            
            // 추가 클래스가 있으면 추가
            if (extraClass) {
                ballClass += ' ' + extraClass;
            }
            
            return `<div class="${ballClass}">${number}</div>`;
        }
    });
</script>
{% endblock %} 